<!DOCTYPE html>
<html>
<head>
    <title>Hello Cocos2d-JS</title> 
    <script type="text/javascript" src="cocos2d-js-v3.9-lite.js" charset="UTF-8"></script>
</head>
<body>   
    <canvas id="gameCanvas" width="1024" height="768"></canvas>
    <script type="text/javascript">
          window.onload = function(){
              cc.game.onStart = function(){
                  //load resources
                  cc.LoaderScene.preload(["HelloWorld.png"], function () {
                      var MenuScene = cc.Scene.extend({
                          onEnter:function () {
                              this._super();
                              var size = cc.director.getWinSize();
							  
							  var sprite = cc.Sprite.create("HelloWorld.png");
                              sprite.setPosition(size.width / 2, size.height / 2);
                              sprite.setScale(0.8);
                              this.addChild(sprite, 0);
							  
							  var menu = new cc.Menu();
							  menu.setPosition(size.width / 2, size.height / 2);
							  this.addChild(menu);

							  var playItem = new cc.MenuItemFont("Play Game", function(sender) {
								cc.log("Play Tapped");
								cc.director.runScene(new GameplayScene());
							  }, this);
							  playItem.fontSize = 20;
							  playItem.fontName = "Arial";
							  menu.addChild(playItem);
							  
                              var label = cc.LabelTTF.create("Goodbye World", "Arial", 40);
                              label.setPosition(size.width / 2, size.height / 3);
                              this.addChild(label, 1);
                          }
                      });
					  var GameplayScene=cc.Scene.extend({
						score:0,
						
						scoreLabel:null,
						
						onEnter:function () {
                              this._super();
                              var size = cc.director.getWinSize();
							  
							  var menu = new cc.Menu();
							  //menu.setPosition(size.width / 2, size.height / 2);
							  this.addChild(menu);
							  
							  //Die
							  var dieItem = new cc.MenuItemFont("Die", function(sender) {
								cc.log("Die Tapped");
								cc.director.runScene(new GameOverScene());
							  }, this);
							  dieItem.color = cc.color(0,0,0);
							  dieItem.fontSize = 20;
							  dieItem.fontName = "Arial";
							  dieItem.setPosition(0, size.height / 3);
							  menu.addChild(dieItem);
							  
							  //Increase the score
							  var plusItem = new cc.MenuItemFont("Increase Score", function(sender) {
								cc.log("Plus Tapped");
								this.score++;
								this.scoreLabel.setString("Score: " + this.score);
							  }, this);
							  plusItem.color = cc.color(155,0,0);
							  plusItem.fontSize = 20;
							  plusItem.fontName = "Arial";
							  plusItem.setPosition(0, size.height / 4);
							  menu.addChild(plusItem);
							  
							  
                              this.scoreLabel = cc.LabelTTF.create("Score: " + this.score, "Arial", 40);
                              this.scoreLabel.setPosition(size.width / 2, size.height / 2);
							  this.scoreLabel.color = cc.color(0,155,0);
                              this.addChild(this.scoreLabel);
						}
					  });
					var GameOverScene=cc.Scene.extend({
						onEnter:function () {
                            this._super();
                            var size = cc.director.getWinSize();
							
							var menu = new cc.Menu();
							//menu.setPosition(size.width / 2, size.height / 2);
							this.addChild(menu);
							
							//Restart the game
							var retryItem = new cc.MenuItemFont("Restart Game", function(sender) {
								cc.log("Retry Tapped");
								cc.director.runScene(new GameplayScene());
							}, this);
							retryItem.color = cc.color(0,155,0);
							retryItem.fontSize = 20;
							retryItem.fontName = "Arial";
							retryItem.setPosition(0, size.height / 3);
							menu.addChild(retryItem);
						
							//Go back to the main menu
							var quitItem = new cc.MenuItemFont("Quit", function(sender) {
								cc.log("Quit Tapped");
								cc.director.runScene(new MenuScene());
							}, this);
							quitItem.color = cc.color(155,0,0);
							quitItem.fontSize = 20;
							quitItem.fontName = "Arial";
							quitItem.setPosition(0, size.height / 4);
							menu.addChild(quitItem);
						}
					  });
                      cc.director.runScene(new MenuScene());
                  }, this);
              };
              cc.game.run("gameCanvas");
          };
    </script>
</body>
</html>